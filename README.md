# QDDモーター特性モデリングツール

## 概要

このアプリケーションは、QDD（Quasi-Direct Drive）モーターの性能特性を分析し、視覚化するためのGUIツールです。
ユーザーはモーターの物理パラメータや動作条件を入力することで、特定の電流と回転数におけるトルク、効率、出力パワーなどを計算し、3Dグラフとして表示できます。

## 主な機能

- **詳細な損失モデリング**: 
    - 銅損、鉄損（ヒステリシス損・渦電流損）、ドライバ損失、ギア損失を個別にモデル化。
    - **熱モデル**: 発生する損失と熱抵抗からモーターの定常温度を推定。
    - **抵抗の温度補正**: モーター温度に応じて巻線抵抗値を補正し、より正確な銅損を計算。
- **性能分析**:
    - 入力されたパラメータに基づき、トルク、効率、出力パワーなどを広範囲な動作領域で計算。
    - **インダクタンスの考慮**: 高回転時の要求電圧を、巻線インダクタンスを考慮してより正確に計算。
- **3D特性マップ**: 電流と回転数を軸に、選択した性能指標（効率、トルクなど）を3Dサーフェスプロットで視覚化。
- **性能サマリー**: ピーク効率、最大出力、最大トルクなどの重要な性能指標を自動で算出し表示。
- **データ出力**:
    - 表示されている3DグラフをPNGファイルとして高解像度で保存。
    - 計算された性能サマリーをテキストファイルとして保存。

## 動作要件

- **Python**: 3.13 以上
- **ライブラリ**:
    - `numpy`
    - `matplotlib`
    - `tkinter` (Python標準ライブラリ)

## インストール

1.  このリポジトリをクローンまたはダウンロードします。
2.  ターミナルでプロジェクトディレクトリに移動し、必要なライブラリをインストールします。

    ```bash
    pip install numpy matplotlib
    ```

## 使い方

プロジェクトのルートディレクトリで以下のコマンドを実行すると、GUIアプリケーションが起動します。

```bash
python main.py
```

## パラメータ

GUIの左パネルから以下のパラメータを入力できます。

- **モーター基本特性**:
    - `KV値 [rpm/V]`: モーターの速度定数。
    - `一相あたり抵抗 (25℃) [Ohm]`: 基準温度(25℃)における巻線の一相あたり抵抗値。
    - `一相あたりインダクタンス [H]`: 巻線の一相あたりインダクタンス。
    - `極対数`: モーターの磁極のペア数。電気角周波数の計算に使用。
    - `配線方式`: `star` (スター結線) または `delta` (デルタ結線)。
    - `連続電流 [A]`: モーターが連続して流せる電流。
    - `ピーク電流 [A]`: モーターが短時間流せる最大電流。
- **熱モデル**:
    - `周囲温度 [°C]`: モーターが置かれている環境の温度。
    - `モーター熱抵抗 [°C/W]`: モーターのケースから周囲環境への熱の伝わりにくさ。値が小さいほど冷却性能が高い。
- **鉄損モデル**:
    - `ヒステリシス係数 [W/rpm]`: ヒステリシス損の大きさを決める係数。
    - `渦電流係数 [W/rpm^2]`: 渦電流損の大きさを決める係数。
- **ドライバ損失モデル**:
    - `ドライバON抵抗 [Ohm]`: モータードライバのFETなどのON抵抗。
    - `ドライバ固定損失 [W]`: 電流に依存しないドライバの固定的な損失。
- **ギア損失モデル**:
    - `減速比`: ギアボックスの減速比。
    - `ギア効率`: ギアボックスの伝達効率。
- **動作条件**:
    - `バス電圧 [V]`: システムの電源電圧。性能の上限を決定します。

## 出力

- **3Dグラフ**: GUI右側に表示される性能マップ。Z軸（色/高さ）はドロップダウンメニューから変更可能です。
- **PNG出力**: 「PNG出力」ボタンから、表示中のグラフを画像として保存できます。
- **サマリー出力**: 「サマリー出力」ボタンから、計算されたピーク性能値などをテキストファイルとして保存できます。

## ライセンス

このプロジェクトは GNU General Public License v2.0 の下で公開されています。詳細は `LICENSE` ファイルをご覧ください。